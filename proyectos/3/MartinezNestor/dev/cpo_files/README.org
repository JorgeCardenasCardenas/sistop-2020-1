#+title: Proyecto 3: (Micro) sistema de archivos

#+BEGIN_SRC yaml
Planteamiento: 2019.10.08
Entrega: 2019.10.29
#+END_SRC

# Â¡Las [[./calificaciones.org][calificaciones y comentarios]] ya estÃ¡n disponibles!

** DescripciÃ³n del proyecto

Para la unidad de sistemas de archivos, creo que resulta natural que
el proyecto sea implementar un sistema de archivos ð Pero, a
diferencia de lo que algunos de ustedes recordarÃ¡n por iteraciones de
este curso, esta vez lo harÃ¡n trabajando sobre una /especificaciÃ³n/ y
sobre un /caso de referencia/.

** Â¿QuÃ© tengo que hacer?

Lo que ustedes deben desarrollar es un programa que pueda obtener,
crear y modificar informaciÃ³n en el micro-sistema-de-archivos de la
Facultad de IngenierÃ­a, =FiUnamFS=.

Siguiendo la especificaciÃ³n que aparece en la siguiente secciÃ³n,
tienen que desarrollar un programa que pueda:

1. Listar los contenidos del directorio
2. Copiar uno de los archivos de dentro del =FiUnamFS= hacia tu sistema
3. Copiar un archivo de tu computadora hacia tu =FiUnamFS=
4. Eliminar un archivo del =FiUnamFS=
5. Desafortunadamente, este sistema de archivos /simplote/ es muy dado
   a la fragmentaciÃ³n externa. Generen tambiÃ©n un programa que
   /desfragmente/ al =FiUnamFS=. Ojo, la defragmentaciÃ³n debe hacerse
   /dentro del sistema de archivos/ (no creando un sistema de archivos
   nuevo y copiando hacia Ã©ste).

*** Sistema muestra

Para verificar su implementaciÃ³n, pueden [[./fiunamfs.img][descargar un sistema de
archivos ejemplo]] que cumple con el planteamiento. Verifiquen que
pueden realizar todas las tareas que les solicitÃ© con Ã©ste. IndÃ­quenme
â Â¿CuÃ¡les son los contenidos del /disco/?

*Ojo:* Como lo reportÃ³ Omar en clase, el sistema de archivos ejemplo
que les dÃ­ tenÃ­a un error. Ya lo corregÃ­; por ello, pasamos de la
versiÃ³n =0.5= a la versiÃ³n =0.6=. Otro error que me indicÃ³ AndrÃ©s me
llevÃ³ a pasasr a la versiÃ³n =0.7=. Â¿A quÃ© jugamos? Â¡Tengo que darles
un ejercicio /confiable/! ð

** EspecificaciÃ³n de =FiUnamFS=

- El sistema de archivos cabe en un /diskette/ tradicional. Claro, no
  espero que tengan acceso al hardware, por lo que lo simularemos
  representÃ¡ndolo en un archivo de longitud fija, de 1440 Kilobytes
- Por simplicidad, si bien en un sistema de archivos real
  representarÃ­amos las magnitudes en su representaciÃ³n binaria, vamos
  a hacerlo con cadenas (esto es, en vez de representar al nÃºmero
  =1354= como los caracteres ASCII =0, 0, 5, 74= (porque 5*256=1280,
  1280+74=1354), represÃ©ntala como la cadena =1354=. Si el campo en
  que vas a ubicar este valor mide mÃ¡s del espacio necesario, agrega
  ceros a la izquierda.
- La superficie del disco se divide en sectores de 512 bytes. Cada
  cluster mide cuatro sectores.
- El pseudodispositivo no maneja /tabla de particiones/, hospeda
  directamente un /volumen/ en la totalidad de su espacio.
- =FiUnamFS= maneja Ãºnicamente un /directorio plano/, no se consideran
  subdirectorios.
- El primer cluster (#0) del pseudodispositivo es el
  /superbloque/. Este contiene informaciÃ³n en los siguientes bytes:
  - 0--8 :: Para identificaciÃ³n, el nombre del sistema de
            archivos. Â¡Debes validar nunca modificar un sistema de
            archivos que no sea el correcto! Debe ser la cadena =FiUnamFS=.
  - 10--13 :: VersiÃ³n de la implementaciÃ³n. Estamos implementando la
              versiÃ³n =0.6=
  - 20--35 :: Etiqueta del volumen
  - 40--45 :: TamaÃ±o del cluster en bytes
  - 47--49 :: NÃºmero de clusters que mide el directorio
  - 52--60 :: NÃºmero de clusters que mide la unidad completa
  El resto del superbloque puede quedar vacÃ­o (o puedes
  /sobrecargarlo/ con otros datos ââ No es importante para la
  implementaciÃ³n.
- El sistema de archivos es de /asignaciÃ³n contigua/. Toda la
  informaciÃ³n de los archivos estÃ¡ en el directorio.
- El directorio estÃ¡ ubicado en los clusters 1 a 4. Cada entrada del
  directorio mide 64 bytes, consistentes en:
  - 0--15 :: Nombre del archivo
  - 16--24 :: TamaÃ±o del archivo, en bytes
  - 25--30 :: Cluster inicial
  - 31--45 :: Hora y fecha de creaciÃ³n del archivo, especificando
              AAAAMMDDHHMMSS (p.ej. '20190509182600')
  - 46--60 :: Hora y fecha de Ãºltima modificaciÃ³n del archivo,
              especificando AAAAMMDDHHMMSS (p.ej. '20191009182600')
  - 61--64 :: Espacio no utilizado (Â¿reservado para expansiÃ³n futura?)
- Las entradas no utilizadas del directorio se identifican porque
  en el campo de nombre llevan la cadena =Xx.xXx.xXx.xXx.=.
  - Los nombres de archivos pueden componerse de cualquier caracter
    dentro del subconjunto ASCII de 7 bits (no acentuados, no Unicode,
    sÃ³lo el viejo y aburrido US-ASCII)
- Es un sistema de archivos plano â No maneja subdirectorios.
- DespuÃ©s del directorio, todo el espacio restante es espacio de
  datos.



** CalificaciÃ³n del proyecto

|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
|                          | *Excelente (100%)*                                                                                                                                                                                                                                                 | *Bueno (75%)*                                                                                                                                                   | *Suficiente (50%)*                                                                                                                                               | *Insuficiente (0%)*                                                                                                        | *Peso* |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| *Proyecto*               |                                                                                                                                                                                                                                                                    |                                                                                                                                                                 |                                                                                                                                                                  |                                                                                                                            |    30% |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Cumplimiento/           | Se cumplen los cinco puntos planteados: Listar los contenidos, copiar un archivo de FiUNAMfs hacia tu equipo, copiar un archivo de tu equipo hacia FiUNAMfs, eliminar un archivo, desfragmentar el medio                                                           | Se cumplen cuatro de los objetivos                                                                                                                              | Se cumplen tres o dos de los objetivos                                                                                                                           | Se cumple uno solo de los objetivos o ninguno                                                                              |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Claridad de desarrollo/ | El cÃ³digo, acompaÃ±ado de la documentaciÃ³n, resultan de clara comprensiÃ³n, a pesar de cualquier nivel de complejidad que mantengan                                                                                                                                  | El cÃ³digo es ofuscado, dificil de seguir, pero la lectura de la documentaciÃ³n ayuda a hacerlo                                                                   | Es dificil comprender la forma en que se desarrollÃ³ incluso teniendo la documentaciÃ³n, o esta estÃ¡ incompleta y no cubre este aspecto                            | Imposible de comprender                                                                                                    |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Interfaz usuario/       | MÃ³dulo de FUSE, o interfaz grÃ¡fica/navegaciÃ³n textual que no requieren de ayuda para realizar las operaciones requeridas                                                                                                                                           | Interfaz grÃ¡fica / navegaciÃ³n textual que requiere comprender documentaciÃ³n; interfaz de lÃ­nea de comandos sencilla o natural                                   | La interfaz usuario es suficiente para presentar y manipular los datos, pero su uso requiere comprender el cÃ³digo fuente                                         | El programa es imposible de utilizar exitosamente sin conocer la implementaciÃ³n detalladamente                             |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| *Desarrollo*             |                                                                                                                                                                                                                                                                    |                                                                                                                                                                 |                                                                                                                                                                  |                                                                                                                            |    30% |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Directorio de proyecto/ | El trabajo entregado consta exclusivamente del cÃ³digo fuente y la documentaciÃ³n, en una estructura acorde para su construcciÃ³n/compilaciÃ³n, evaluaciÃ³n y uso directo; en caso de requerirlo, un .gitignore mantiene limpio el directorio al compilar               | SÃ³lo el cÃ³digo fuente y la documentaciÃ³n forman parte de los commits, pero construir / ejecutar el cÃ³digo ensucia al repositorio (Â¿deberÃ­a manejar .gitignore?) | El trabajo entregado incluye archivos innecesarios (como archivos objeto ya compilados o subdirectorios generados por el entorno de desarrollo empleado          | No entregÃ³ usando Git                                                                                                      |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /CÃ³digo vÃ¡lido/          | Al ejecutar las instrucciones documentadas, el cÃ³digo puede ejecutarse exitosamente al primer intento                                                                                                                                                              | Las instrucciones que forman parte de la documentaciÃ³n tienen que adecuarse para poder ejecutar el cÃ³digo, o hay errores menores que corregir para que funcione | No estÃ¡ documentado cÃ³mo ejecutar el cÃ³digo, o hay errores mayores que corregir para poder ejecutarlo                                                            | ResultÃ³ imposible probar la ejecuciÃ³n                                                                                      |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Comentarios/            | El cÃ³digo estÃ¡ comentado donde hace falta, no repite informaciÃ³n obvia. Los comentarios ayudan a comprender la lÃ³gica, no la implementaciÃ³n                                                                                                                        | El cÃ³digo estÃ¡ comentado donde hace falta, pero los comentarios son excesivos: AdemÃ¡s de la lÃ³gica general, mencionan lo obvio                                  | Hay algunos comentarios Ãºtiles en el programa, pero falta mucho para que ayude a una buena comprensiÃ³n                                                           | No hay comentarios                                                                                                         |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| *Legibilidad*            |                                                                                                                                                                                                                                                                    |                                                                                                                                                                 |                                                                                                                                                                  |                                                                                                                            |    20% |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| Estructura               | El cÃ³digo estÃ¡ bien organizado y emplea un estilo de indentaciÃ³n de forma consistente                                                                                                                                                                              | El cÃ³digo estÃ¡ mayormente indentado; hay inconsistencias menores                                                                                                | Falta claridad en los bloques por no emplear indentaciÃ³n o hacerlo de forma absolutamente inconsistente                                                          |                                                                                                                            |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| Nomenclatura             | Los nombres de los sÃ­mbolos (variables, funciones, mÃ©todos, clases) son claros y acorde a su funciÃ³n; los principales elementos estÃ¡n documentados expresamente                                                                                                    | Los nombres de los sÃ­mbolos mencionados son claros y acorde a su funciÃ³n, aunque no estÃ©n documentados                                                          | Los nombres de los sÃ­mbolos no son claros, pero su uso y significado forma parte de la documentaciÃ³n                                                             | Cuesta trabajo seguir la lÃ³gica; los sÃ­mbolos empleados no tienen nombres significativos, y su funciÃ³n no estÃ¡ documentada |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| *Entrega*                |                                                                                                                                                                                                                                                                    |                                                                                                                                                                 |                                                                                                                                                                  |                                                                                                                            |    20% |
|--------------------------+---------------------------------------------------------------------------------------------------------------------PNG

   IHDR   þ  ,   ãÁ   sRGB ®Îé   gAMA  ±üa   	pHYs  Ã  ÃÇo¨d  ÿ¥IDATx^ì½Õ.,ïz× 4Ý=#ïµ×ëõÝûïÞµw÷.Þ]g°	®ªnIÈ0ÑÛØe0Áä$ÍtUu÷"D9È È¡ò£ÿ}ßsª§º§»§{$l}Ïs®:UuÂÏw¾3llf0~æßÈ\ju:þaLð/#op}§Õótr·8ÁonxJÊ	&']*þÞtN0/åR¿ÿ/o3}CëèiôwÌ
ëgø<Þó^ÊõßÃ»Á{Äß;?;nþÔz«]éÐK¥ßîþ¯ÚÝÞÙ:,}ÑßÚm-ð_ØmÆVÿF8á7AD»¦ÜÂ/®¸+éæîL:áIÇ_ û¸5Û½¡m×«6´r5þ¿rCë®³6´½ÂhÊI¤b÷_ÀßçQ#!`ïH8Áxÿ>\ïÞ!Fâwáïøýßûõ7XÓ
&1Ó´íA»L;ÑÆqWmhÍNÙ6¬Byýá;ñ|?ëKyÁ·£ÿôo»-°>Ù0bl$q·:ùQ êC^þÌÎÑ<"Xÿ%]Û~xÍ¶Ý®ÍÚÊtm QX>@yVi¢» ï8	tXÊËíÊàùï$¼ðÿpZ½üg'¤0,}ÃßÛ4aÂ§lSÛ¡äN8µÏN¹~.9ªøOmÿoð­ÐDZÜhó/QN ³8@}¹	¿Ñßà]\[Ê¥U´ýðZëô?Çu£OO£Þ`Pg¦<ÿW©tÐh/þóÌmÅØ¤ÆÏÜuÛ¤zFýö»R^þ~"sëhHEHC#goh%aCuÄ{ïó¥	7üuî	¢Þ)É}uëìÔÿE5ß¾þÏ¶ôéá;ÚÚ¼Î¯ ÿß¥´§Ô¡çj0·G0oRs´HÁx.sx÷§¦Ò¹ß%3ùÑI'ÿ5»}ûØC´Y¥§ÃÃ¾½{?õ]ªµb@ÚÈ6¢>
<H{~ïO­N©¼zÁçFHÿ{¤ü7çî ø	`ã}(Òä!3à8ó&ÿ.ÆÿA0ÎKqÿ§4¶h[`À@DLîI	ö^	u/me¤ªR5&?2Rû·	'Ì¿Ú²óä}ÍHÎHd¦üNàbÌ ³íÀ?ró¹ù Ùàø«ÀFqIÂÍÿDÁ÷/Ý¢lÚÐ2~f"îü~Â+	}-lò×EäTÑw½*g°Rþ^ØDªÛùÙÎÿeß èGiqsÿÕêåtüa:Ð)¹¸uìLk.ÌÄ¼oÒ±:¿¡9µMûVûøøKªÜ©L×÷iÔñÛa£/=éA'¤û+¸2N5rëqÅ¿³n\ØþÄÏ|>;ykû«& ñwHyûä÷¤2Ý÷'ÜaöVÃ@sï>¨Ñ÷á=sÚvÉý½½UNWK";øW`ûÑ±·6ÐKfüÿH¸¹%½àrËßõfEä*2ðed¸þû¤[ÜQK[àÏÆÍø+zÁS^ñWè×P]§W¾öä´Û¿û6)ÿ2lûþÚ>9´°ý-/y&÷ÕD:ü>ýôà9H¨RÙ)O¡­]¶vMH¤ó»k©ö/%ú´*Ùîÿ½Ý$¼Îq²£Q Ù¬Iîüg{«*§W¶·æ54}°·ªÂ·?ÓöÊÚÑ§m¹B`o)pÕÎW§Âl»ÿ/3\ÈX9I·pT"l7ì I¶mO*OûÅÄ$¼üÅ}dÅõ§¨ÒÃÌe7ûÈà$6µûÏ¤óð÷ H¢IØ<nø4Úñþ_M'¡Vl3Sl{_0t0Nkç\s}Ù¼x÷½ô¨Û*}Ïh.)jõÁõ÷5.-Þ¤ohÖa|­ZíïgoUV§ëðÞÙ7ü]¼ Ï<1¹à,ËÁ¸¥m.I<DÌwkh­Nn¿¶ßCÆ/N}^ÃµÆW°}dlîÀõeLäÏÁÕgc?nw$ÒUfÍËO
{ #Ë¨ØG¸îÍµl¯0vçDtÒ'B'ÁSrðegï³Ðí¤/´ðI~7w¼­Ò'4Mønç.­ z>)··ªBK¦ó¸dÇúæÛß¨Ïh/ß£5F+¡I0á×ÑRLA\ò¤F¹Ú#á.ãyí ÞàÛkpí¤W8xäf`Æl
` I2S8÷'"TÛn×	@ü2p*4=Ã¶úÆ	>iö´$6}%D·]ëÔøKDÄÔ_b{RÚ ;´txL"Óµù;}I¿jo¾_Õâÿm«Õf	vôõM2Ì%/÷{«*¨Rû¢1!ÁðKL0V¢±â_²Sß?Ù¾vpãÕêä©m øi/Ý1ÉÑù¯ÙÚ[`cÃ6»Lüd&±çÿÄIaô0S`ÌúQ©tÇ¿Ûª@Ä3HÜ×RÐùÆè6ÚÄø7®]s{ Ë¿¾UJH}~ß	VD_Ð,áVÁqwüµLþëöVU #<V&AÈxãÃ½Á°ÿ û;Àûîæ¡Ý¥ÈÆÈä1æZþàLûÚ!ûRÒÍÿä*´kMÛn¥8ÕÎý«­º
ÚÒ]Od
@]¼Y¡®Bºð6¨$Fë:£	â2]rTÇ?¥²ÿKFöFÓ Â?HkV	÷Ù~{kÐ¡Døø¶óõÒù¶jMhðA¿¦¤Ö7Ù'ÿÿÙ[UÌ¡CïGý7«ªëÛIµ_ãþ^ÒíÜDwÚ¦Üñ,Í&¾}ü©}¢&1zôç4jÞqþÐ}Ä¼ÂH@îhqÃ_Ðd°U·ÀAªW~TÊ-À¥"v©ù{åm¯ïyn¶Ù%øüÈ45áOXb!u`gz!ÔïàVñ±©öË¾hiéð9²2"úª¡=¢rýÃëÏPJ¦<«ûRùVõ¡nGOÆ6ü»þgí­ª:sÊ>û`ÓH¦ 	ÆðíFb(ð[ÙG­ÿdÂ/ãÊ5,[­_ L~?0¿ºc¼¨kwþìÂ®7 At'ÀçX÷«\ BÇ?H¾­6 hõüo$3) êeD,J·7qMK\âÂdºoIÉ/bfÚí­A8ái}~»É['ÂHü>0Wnj@Óî¼Ôh4üfðfÝx$öO27¸ÒÞ>¶Ð>¼£¶QëÁ8hn5Çb<K MÜ{§·¹Å]¶Õÿ8j:ÀÓÃÁàçjxÜl2ù"'µµ_¶Õ¶@MØnÒ§[Á-¨W`àÖp%~w~©;µ (Ï$\e$®ÿ©*ûKÚÃn5äöèT"òLßÐâä~c_UF@2±ÖS"ðÝvÿ'öÖ C9áCö&JíL:¹²ÃPùWõsS8:2ë-rimxã«qvüsí­!2ÙTýÐ*ýÐà8$|ùÈÜ-#@ÁÞ9q-Ë/¸ìh_Ó4´dòÿMôBàÖ{Ò606` W'Ó¹Ñ[rTÀÖ£.ÿ»¤W8¶Ó%éîÄï#ÛnÚz'"`þnzEìDôðA ïh;á¹dDÕ¼5ÿ4käóPÃåûÊ@uÈôQì Âí­A^ïty¡è/²l;úPÓËß´Äwý9ðñn'¸gØ°öNo0ÁS$BjÜÈ;ØÞhuü?ÊÌâ¹Áj0ï¶:á71¿¿Ç|ÞB­Èh3P~ô/áæ/Æ°?`"»ö^×l ØsÄé¾""ÿì9SÜÒ½5#âºÚ>ëì1z÷^^cJøÂcÉl1k«ÔÖLþ °Þ@¼ç£¾lv& 3ydÊï°·9ûZOÀo×0.Ûáú